{"version":3,"file":"bundle.js","sourceRoot":"","sources":["../../_src/hello.ts","../../_src/utils.ts","../../_src/terminal.ts","../../_src/index.ts"],"names":[],"mappings":"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","sourcesContent":["export function sayHello() {\n  alert('Hello, world!')\n}\n","export function forEachElement<T extends Element, E extends T>(elements: HTMLCollectionOf<T>, fn: (el: E) => void) {\n  for (let i = 0, len = elements.length; i < len; i++) {\n    var element = elements.item(i)\n    if (element != null) {\n      fn.call(null, element as E)\n    }\n  }\n}\n\nexport function forEachNode<T extends Node>(nodes: NodeListOf<T>, fn: (el: T) => void) {\n  nodes.forEach(value => value && fn.call(null, value));\n}\n\nexport async function delay(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n","import { delay } from './utils'\n\ntype TerminalSection = string|number\n\nexport async function createTerminal(el: HTMLElement) {\n  const sections = buildTerminalSections(el.children)\n  await executeTerminalSections(el, sections)\n}\n\nasync function executeTerminalSections(el: HTMLElement, sections: TerminalSection[]) {\n  el.innerHTML = ''\n\n  let spanElement = null\n  while (sections.length > 0) {\n    const section = sections.shift()\n    if (typeof section === 'undefined') {\n      continue\n    }\n    else if (typeof section === 'number') {\n      await delay(section)\n    }\n    else if (section === '\\n') {\n      if (spanElement) {\n        el.append(document.createElement('br'))\n      }\n      spanElement = document.createElement('span')\n      el.classList.remove('typing')\n      el.append(spanElement)\n    }\n    else if (spanElement) {\n      spanElement.textContent += section\n      el.classList.add('typing')\n      await delay(80)\n    }\n  }\n\n  el.classList.remove('typing')\n}\n\nfunction buildTerminalSections(elements: HTMLCollectionOf<Element>): TerminalSection[] {\n  const transform = (acc: TerminalSection[], el: Element) => [...acc, ...prepareSection(el)]\n  return Array.from(elements).reduce(transform, [])\n}\n\nfunction prepareSection(element: Element): TerminalSection[] {\n  if (element instanceof HTMLSpanElement) {\n    return prepareComplexSection(element)\n  }\n\n  return []\n}\n\nfunction prepareComplexSection(element: HTMLElement): TerminalSection[] {\n  const text = (element.textContent || '').trim().split('')\n  const sections: TerminalSection[] = ['\\n', ...text]\n\n  if (element.dataset['delay']) {\n    const delay = Number(element.dataset['delay'])\n    sections.splice(1, 0, delay)\n  }\n\n  return sections\n}\n","import { createTerminal } from './terminal'\nimport { forEachElement } from './utils'\n\nconst terminalElements = document.getElementsByClassName('terminal')\nforEachElement(terminalElements, startTerminal)\n\nasync function startTerminal(el: HTMLElement) {\n  await createTerminal(el)\n  console.log(\"Terminal done!\")\n}\n"]}