{"version":3,"file":"bundle.js","sourceRoot":"","sources":["../../_src/utils.ts","../../_src/form.ts","../../_src/parallax.ts","../../_src/terminal.ts","../../_src/modal.ts","../../_src/index.ts"],"names":[],"mappings":"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","sourcesContent":["export function forEachElement<T extends Element, E extends T>(elements: HTMLCollectionOf<T>, fn: (el: E) => void) {\n  for (let i = 0, len = elements.length; i < len; i++) {\n    var element = elements.item(i)\n    if (element != null) {\n      fn.call(null, element as E)\n    }\n  }\n}\n\nexport function forEachNode<T extends Node>(nodes: NodeListOf<T>, fn: (el: T) => void) {\n  nodes.forEach(value => value && fn.call(null, value))\n}\n\nexport async function delay(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n","import { delay, forEachElement } from \"./utils\"\n\nexport function createForm(form: HTMLElement) {\n  if (form instanceof HTMLFormElement) {\n    handleFormSubmit(form)\n  }\n}\n\nfunction handleFormSubmit(form: HTMLFormElement) {\n  form.addEventListener('submit', ev => {\n    ev.preventDefault()\n    processFormSend(form)\n  })\n}\n\nasync function processFormSend(form: HTMLFormElement) {\n  form.classList.add('form--sending')\n  form.classList.remove('form--error')\n  setFormDisabled(form, true)\n\n  try {\n    await sendFormData(form)\n    form.classList.add('form--success')\n  }\n  catch (err) {\n    form.classList.add('form--error')\n    setFormDisabled(form, false)\n  }\n  finally {\n    form.classList.remove('form--sending')\n  }\n}\n\nasync function sendFormData(form: HTMLFormElement) {\n  const formData = new FormData(form)\n  const result = await fetch(form.action, {\n    method: form.method,\n    body: formData,\n    headers: {\n      'Accept': 'application/json',\n    },\n  })\n\n  if (result.status !== 200) {\n    throw new Error(result.statusText)\n  }\n}\n\nfunction setFormDisabled(form: HTMLFormElement, disabled: boolean) {\n  for (const element of Array.from(form.elements)) {\n    if (element instanceof HTMLInputElement) {\n      element.readOnly = disabled\n    }\n    if (element instanceof HTMLTextAreaElement) {\n      element.readOnly = disabled\n    }\n    if (element instanceof HTMLButtonElement) {\n      element.disabled = disabled\n      element.blur()\n    }\n  }\n}\n","import { forEachElement } from \"./utils\"\n\nexport function createParallax(target: HTMLElement) {\n  const layers = target.children\n  window.addEventListener('scroll', ev => {\n    forEachElement(layers, updateLayer)\n  }, { passive: true })\n}\n\nfunction updateLayer(layer: HTMLElement) {\n  const scale = Number(layer.dataset['scrollScale'])\n  const travel = window.scrollY / scale\n  layer.style.transform = `translateY(-${travel}px)`;\n}\n","import { delay } from './utils'\n\ninterface Terminal {\n  root: HTMLElement\n  body: HTMLElement\n}\n\ninterface TerminalLine {\n  element: HTMLElement\n  value: string\n}\n\nexport async function createTerminal(root: HTMLElement) {\n  const body = root.querySelector('.terminal-body')\n  if (body instanceof HTMLElement) {\n    const terminal: Terminal = { root, body }\n    const lines = fetchTerminalLines(terminal)\n    await executeTerminal(terminal, lines)\n  }\n\n  // Smooth scroll on continue click\n  const link = root.querySelector('.terminal-continue')\n  if (link instanceof HTMLAnchorElement) {\n    link.addEventListener('click', ev => {\n      const href = link.getAttribute('href') || ''\n      const target = document.querySelector(href)\n      if (target instanceof HTMLElement) {\n        target.scrollIntoView({ behavior: 'smooth' })\n        ev.preventDefault()\n      }\n    })\n  }\n}\n\nasync function executeTerminal(terminal: Terminal, lines: TerminalLine[]) {\n  const root = terminal.root\n  root.classList.add('terminal--animating')\n\n  while (lines.length > 0) {\n    const line = lines.shift() as TerminalLine\n    await executeTerminalLine(terminal, line)\n  }\n\n  await delay(600)\n  root.classList.remove('terminal--animating')\n}\n\nasync function executeTerminalLine(terminal: Terminal, line: TerminalLine) {\n  const { root, body } = terminal\n\n  body.append(line.element)\n\n  if (line.element.dataset['delay']) {\n    const delayTime = Number(line.element.dataset['delay'])\n    await delay(delayTime)\n  }\n\n  root.classList.add('terminal--typing')\n\n  const sequence = line.value.split('')\n  while (sequence.length > 0) {\n    const seq = sequence.shift() || ''\n    line.element.textContent += seq\n    await delay(60)\n  }\n\n  await delay(200)\n  root.classList.remove('terminal--typing')\n}\n\nfunction fetchTerminalLines(terminal: Terminal): TerminalLine[] {\n  return terminal.body ? parseTerminalBody(terminal.body) : []\n}\n\nfunction parseTerminalBody(body: HTMLElement): TerminalLine[] {\n  return Array.from(body.children)\n    .filter(el => el instanceof HTMLParagraphElement)\n    .map(el => transformTerminalElement(el as HTMLElement))\n}\n\nfunction transformTerminalElement(element: HTMLElement): TerminalLine {\n  const value = element.textContent || ''\n  element.innerHTML = ''\n  element.remove()\n\n  return { element, value }\n}\n","export function createModal(modal: HTMLElement) {\n  const backdrop = modal.getElementsByClassName('modal-backdrop').item(0)\n  const toggler = modal.previousElementSibling\n\n  if (toggler instanceof HTMLInputElement) {\n    toggler.addEventListener('change', ev => {\n      if (toggler.checked) {\n        selectFirstGallerySlide(modal)\n      }\n    })\n  }\n\n  if (backdrop instanceof HTMLElement && toggler instanceof HTMLInputElement) {\n    backdrop.addEventListener('click', ev => {\n      if (ev.target === backdrop) {\n        toggler.checked = false\n      }\n    })\n\n    // Disable wheel scroll on modal\n    backdrop.addEventListener('wheel', ev => {\n      ev.preventDefault()\n    })\n  }\n}\n\nfunction selectFirstGallerySlide(modal: HTMLElement) {\n  const gallery = modal.getElementsByClassName('gallery').item(0)\n  if (gallery instanceof HTMLElement) {\n    const firstInput = gallery.getElementsByTagName('input').item(0)\n    if (firstInput instanceof HTMLInputElement) {\n      firstInput.checked = true\n    }\n  }\n}\n","import { createParallax } from './parallax'\nimport { createTerminal } from './terminal'\nimport { createModal } from './modal'\nimport { createForm } from './form'\nimport { forEachElement } from './utils'\n\nsetupElements('terminal', createTerminal)\nsetupElements('parallax', createParallax)\nsetupElements('modal', createModal)\nsetupElements('form', createForm)\n\nfunction setupElements(className: string, callback: (el: HTMLElement) => void) {\n  const elements = document.getElementsByClassName(className)\n  forEachElement(elements, callback)\n}\n"]}